var plugin=function(exports,internal,svelte$1){"use strict";function styleInject(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var css_248z$2=".injecteur-code-container.svelte-18arvls{display:block !important;width:100% !important;writing-mode:horizontal-tb !important;direction:ltr !important;text-orientation:mixed !important;box-sizing:border-box !important}.execute-button.svelte-18arvls:hover{background:#45a049 !important}.execute-button.svelte-18arvls:active{background:#3d8b40 !important}";function create_if_block_1(e){let t,n,r,o;return{c(){t=internal.element("button"),n=internal.text("‚ñ∂ Ex√©cuter le code"),internal.attr(t,"class","execute-button svelte-18arvls"),internal.attr(t,"style","background:#4CAF50!important;color:white!important;border:none!important;padding:10px 20px!important;border-radius:5px!important;cursor:pointer!important;font-size:14px!important;font-weight:bold!important;margin-bottom:10px!important;"+forceHorizontal)},m(i,a){internal.insert(i,t,a),internal.append(t,n),r||(o=internal.listen(t,"click",e[6]),r=!0)},p:internal.noop,d(e){e&&internal.detach(t),r=!1,o()}}}function create_else_block$2(e){let t;return{c(){t=internal.element("div"),t.innerHTML='<div style="font-size:32px!important;margin-bottom:10px!important;writing-mode:horizontal-tb!important;direction:ltr!important;">üìù</div> \n      <div style="font-size:14px!important;font-weight:600!important;color:#333!important;margin-bottom:8px!important;writing-mode:horizontal-tb!important;direction:ltr!important;line-height:1.5!important;">Injecteur de code personnalis√©</div> \n      <div style="font-size:12px!important;color:#666!important;writing-mode:horizontal-tb!important;direction:ltr!important;line-height:1.5!important;white-space:normal!important;word-wrap:break-word!important;">Configurez le code HTML, CSS ou JavaScript dans les propri√©t√©s ‚Üí</div>',internal.set_style(t,"display","flex",1),internal.set_style(t,"flex-direction","column",1),internal.set_style(t,"align-items","center",1),internal.set_style(t,"justify-content","center",1),internal.set_style(t,"padding","20px",1),internal.set_style(t,"border","2px dashed #4CAF50",1),internal.set_style(t,"border-radius","8px",1),internal.set_style(t,"background","#f9fff9",1),internal.set_style(t,"text-align","center",1),internal.set_style(t,"width","100%",1),internal.set_style(t,"box-sizing","border-box",1),internal.set_style(t,"writing-mode","horizontal-tb",1),internal.set_style(t,"direction","ltr",1)},m(e,n){internal.insert(e,t,n)},p:internal.noop,d(e){e&&internal.detach(t)}}}function create_if_block$2(e){let t;return{c(){t=internal.element("div"),internal.attr(t,"style",forceHorizontal+"word-wrap:break-word!important;")},m(n,r){internal.insert(n,t,r),t.innerHTML=e[0]},p(e,n){1&n&&(t.innerHTML=e[0])},d(e){e&&internal.detach(t)}}}function create_fragment$3(e){let t,n,r,o,i,a="onClick"===e[1]&&create_if_block_1(e);function l(e,t){return e[0]?create_if_block$2:create_else_block$2}let s=l(e),c=s(e);return{c(){t=internal.element("div"),a&&a.c(),n=internal.space(),c.c(),internal.attr(t,"class","injecteur-code-container svelte-18arvls"),internal.attr(t,"style",forceHorizontal)},m(l,s){internal.insert(l,t,s),a&&a.m(t,null),internal.append(t,n),c.m(t,null),e[12](t),o||(i=internal.action_destroyer(r=e[5].call(null,t,e[3].styles)),o=!0)},p(e,[o]){"onClick"===e[1]?a?a.p(e,o):(a=create_if_block_1(e),a.c(),a.m(t,n)):a&&(a.d(1),a=null),s===(s=l(e))&&c?c.p(e,o):(c.d(1),c=s(e),c&&(c.c(),c.m(t,null))),r&&internal.is_function(r.update)&&8&o&&r.update.call(null,e[3].styles)},i:internal.noop,o:internal.noop,d(n){n&&internal.detach(t),a&&a.d(),c.d(),e[12](null),o=!1,i()}}}styleInject(css_248z$2);const forceHorizontal="display:block!important;width:100%!important;writing-mode:horizontal-tb!important;direction:ltr!important;text-orientation:mixed!important;box-sizing:border-box!important;";function instance$3($$self,$$props,$$invalidate){let $component,{htmlCode:htmlCode=""}=$$props,{cssCode:cssCode=""}=$$props,{jsCode:jsCode=""}=$$props,{executionMode:executionMode="onMount"}=$$props,{intervalTime:intervalTime=1e3}=$$props,{sandboxMode:sandboxMode=!1}=$$props;const component=svelte$1.getContext("component");internal.component_subscribe($$self,component,e=>$$invalidate(3,$component=e));const{styleable:styleable,notificationStore:notificationStore,builderStore:builderStore}=svelte$1.getContext("sdk");let containerElement,styleElement,intervalId,hasExecuted=!1;function executeJavaScript(){if(jsCode.trim())try{if(sandboxMode){const e=new Function("component","context",jsCode);e(component,svelte$1.getContext)}else eval(jsCode);notificationStore?.actions?.success("Code JavaScript ex√©cut√© avec succ√®s")}catch(e){console.error("Erreur d'ex√©cution JavaScript:",e),notificationStore?.actions?.error(`Erreur JavaScript: ${e.message}`)}}function injectCSS(){if(!cssCode.trim())return;styleElement&&styleElement.remove();const e=`injector-${component?.id||Math.random().toString(36).substr(2,9)}`;containerElement&&containerElement.setAttribute("data-injector-id",e);const t=cssCode.split("}").map(t=>{if(!t.trim())return"";const[n,...r]=t.split("{");return n.trim()?`[data-injector-id="${e}"] ${n.trim()} { ${r.join("{")}`:""}).join("}\n");styleElement=document.createElement("style"),styleElement.innerHTML=t,document.head.appendChild(styleElement)}function executeManually(){injectCSS(),executeJavaScript()}function div_binding(e){internal.binding_callbacks[e?"unshift":"push"](()=>{containerElement=e,$$invalidate(2,containerElement)})}return svelte$1.onMount(()=>{injectCSS(),"onMount"===executionMode?(executeJavaScript(),$$invalidate(11,hasExecuted=!0)):"onInterval"===executionMode&&(intervalId=setInterval(()=>{executeJavaScript()},intervalTime))}),svelte$1.onDestroy(()=>{intervalId&&clearInterval(intervalId),styleElement&&styleElement.remove()}),$$self.$$set=e=>{"htmlCode"in e&&$$invalidate(0,htmlCode=e.htmlCode),"cssCode"in e&&$$invalidate(7,cssCode=e.cssCode),"jsCode"in e&&$$invalidate(8,jsCode=e.jsCode),"executionMode"in e&&$$invalidate(1,executionMode=e.executionMode),"intervalTime"in e&&$$invalidate(9,intervalTime=e.intervalTime),"sandboxMode"in e&&$$invalidate(10,sandboxMode=e.sandboxMode)},$$self.$$.update=()=>{128&$$self.$$.dirty&&cssCode&&injectCSS(),2306&$$self.$$.dirty&&jsCode&&"onMount"===executionMode&&!hasExecuted&&(executeJavaScript(),$$invalidate(11,hasExecuted=!0))},[htmlCode,executionMode,containerElement,$component,component,styleable,executeManually,cssCode,jsCode,intervalTime,sandboxMode,hasExecuted,div_binding]}class Component$1 extends internal.SvelteComponent{constructor(e){super(),internal.init(this,e,instance$3,create_fragment$3,internal.safe_not_equal,{htmlCode:0,cssCode:7,jsCode:8,executionMode:1,intervalTime:9,sandboxMode:10})}}var name="injecteur-code-personnalise",version$1="2.2.0",description="Injecteur de code personnalis√© (HTML, CSS, JavaScript) pour Budibase - Affichage texte corrig√©",author="MEMORA Solutions - St√©phane Lapointe <stephane@memora.ca> (https://memora.solutions)",contributors=[{name:"St√©phane Lapointe",email:"stephane@memora.ca"}],license="MIT",svelte="index.js",module="dist/plugin.min.js",repository={type:"git",url:"https://github.com/memora-solutions/budibase-injecteur-code"},keywords=["budibase","plugin","custom-code","javascript","html","css","code-injection","memora"],dependencies={"@crownframework/svelte-error-boundary":"^1.0.3"},scripts={build:"rollup -c",watch:"rollup -c -w",dev:"rollup -c -w"},devDependencies={"@budibase/types":"^3.0.0","@rollup/plugin-commonjs":"^18.0.0","@rollup/plugin-node-resolve":"^11.2.1",playwright:"^1.55.1",postcss:"^8.2.10",rollup:"^2.44.0","rollup-plugin-copy2":"^0.3.1","rollup-plugin-json":"^4.0.0","rollup-plugin-polyfill-node":"^0.8.0","rollup-plugin-postcss":"^4.0.0","rollup-plugin-svelte":"^7.1.0","rollup-plugin-terser":"^7.0.2",svelte:"^3.49.0",tar:"^6.1.11"},budibase={type:"component",name:"Injecteur de code personnalis√©",version:"2.2.0",description:"Permet d'injecter du code HTML, CSS et JavaScript personnalis√© dans vos applications Budibase - Affichage texte corrig√©",icon:"Code"},pkg={name:name,version:version$1,description:description,author:author,contributors:contributors,license:license,svelte:svelte,module:module,repository:repository,keywords:keywords,dependencies:dependencies,scripts:scripts,devDependencies:devDependencies,budibase:budibase},css_248z$1=".error.svelte-n0kdln{background:var(--spectrum-global-color-red-400);color:white;border-radius:4px;padding:16px;display:flex;flex-direction:column;justify-content:flex-start;align-items:stretch;gap:8px;min-width:400px}.detail.svelte-n0kdln{font-family:monospace;font-size:10px;padding:8px;background:rgba(0, 0, 0, 0.1);border-radius:4px;max-height:100px;overflow:auto}";function create_else_block$1(e){let t;const n=e[7].default,r=internal.create_slot(n,e,e[6],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||64&o)&&internal.update_slot_base(r,n,e,e[6],t?internal.get_slot_changes(n,e[6],o,null):internal.get_all_dirty_from_scope(e[6]),null)},i(e){t||(internal.transition_in(r,e),t=!0)},o(e){internal.transition_out(r,e),t=!1},d(e){r&&r.d(e)}}}function create_if_block$1(e){let t,n,r,o,i,a,l,s;return{c(){t=internal.element("div"),n=internal.element("b"),n.textContent=`Une erreur s'est produite dans le plugin "${pkg.name}" :`,r=internal.space(),o=internal.element("div"),i=internal.text(e[2]),internal.attr(o,"class","detail svelte-n0kdln"),internal.attr(t,"class","error svelte-n0kdln")},m(c,d){internal.insert(c,t,d),internal.append(t,n),internal.append(t,r),internal.append(t,o),internal.append(o,i),l||(s=internal.action_destroyer(a=e[3].call(null,t,e[1])),l=!0)},p(e,t){4&t&&internal.set_data(i,e[2]),a&&internal.is_function(a.update)&&2&t&&a.update.call(null,e[1])},i:internal.noop,o:internal.noop,d(e){e&&internal.detach(t),l=!1,s()}}}function create_fragment$2(e){let t,n,r,o;const i=[create_if_block$1,create_else_block$1],a=[];function l(e,t){return e[2]?0:1}return t=l(e),n=a[t]=i[t](e),{c(){n.c(),r=internal.empty()},m(e,n){a[t].m(e,n),internal.insert(e,r,n),o=!0},p(e,[o]){let s=t;t=l(e),t===s?a[t].p(e,o):(internal.group_outros(),internal.transition_out(a[s],1,1,()=>{a[s]=null}),internal.check_outros(),n=a[t],n?n.p(e,o):(n=a[t]=i[t](e),n.c()),internal.transition_in(n,1),n.m(r.parentNode,r))},i(e){o||(internal.transition_in(n),o=!0)},o(e){internal.transition_out(n),o=!1},d(e){a[t].d(e),e&&internal.detach(r)}}}function instance$2(e,t,n){let r,o,i,a=internal.noop,l=()=>(a(),a=internal.subscribe(d,e=>n(2,i=e)),d);e.$$.on_destroy.push(()=>a());let{$$slots:s={},$$scope:c}=t,{error:d=null}=t;l();const{styleable:p}=svelte$1.getContext("sdk"),u=svelte$1.getContext("component");return internal.component_subscribe(e,u,e=>n(5,o=e)),e.$$set=e=>{"error"in e&&l(n(0,d=e.error)),"$$scope"in e&&n(6,c=e.$$scope)},e.$$.update=()=>{32&e.$$.dirty&&n(1,r={normal:{},id:o.id,interactive:!0})},[d,r,i,p,u,o,c,s]}styleInject(css_248z$1);class Boundary$1 extends internal.SvelteComponent{constructor(e){super(),internal.init(this,e,instance$2,create_fragment$2,internal.safe_not_equal,{error:0})}}var css_248z=".error.svelte-1rw9jfe{border:1px solid red}.trace.svelte-1rw9jfe{font-family:monospace}";function create_else_block(e){let t;const n=e[5].default,r=internal.create_slot(n,e,e[4],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||16&o)&&internal.update_slot_base(r,n,e,e[4],t?internal.get_slot_changes(n,e[4],o,null):internal.get_all_dirty_from_scope(e[4]),null)},i(e){t||(internal.transition_in(r,e),t=!0)},o(e){internal.transition_out(r,e),t=!1},d(e){r&&r.d(e)}}}function create_if_block(e){let t,n,r,o,i,a,l,s,c=e[1].message+"",d=(e[2]?e[1].stack:"")+"";return{c(){t=internal.element("div"),n=internal.element("b"),r=internal.text(c),o=internal.space(),i=internal.element("pre"),a=internal.text("      "),l=internal.text(d),s=internal.text("\n    "),internal.attr(i,"class","trace svelte-1rw9jfe"),internal.attr(t,"class","error svelte-1rw9jfe")},m(e,c){internal.insert(e,t,c),internal.append(t,n),internal.append(n,r),internal.append(t,o),internal.append(t,i),internal.append(i,a),internal.append(i,l),internal.append(i,s)},p(e,t){2&t&&c!==(c=e[1].message+"")&&internal.set_data(r,c),2&t&&d!==(d=(e[2]?e[1].stack:"")+"")&&internal.set_data(l,d)},i:internal.noop,o:internal.noop,d(e){e&&internal.detach(t)}}}function create_fragment$1(e){let t,n,r,o;const i=[create_if_block,create_else_block],a=[];function l(e,t){return e[1]?0:1}return t=l(e),n=a[t]=i[t](e),{c(){n.c(),r=internal.empty()},m(e,n){a[t].m(e,n),internal.insert(e,r,n),o=!0},p(e,[o]){let s=t;t=l(e),t===s?a[t].p(e,o):(internal.group_outros(),internal.transition_out(a[s],1,1,()=>{a[s]=null}),internal.check_outros(),n=a[t],n?n.p(e,o):(n=a[t]=i[t](e),n.c()),internal.transition_in(n,1),n.m(r.parentNode,r))},i(e){o||(internal.transition_in(n),o=!0)},o(e){internal.transition_out(n),o=!1},d(e){a[t].d(e),e&&internal.detach(r)}}}function instance$1(e,t,n){let r,o=internal.noop,i=()=>(o(),o=internal.subscribe(s,e=>n(1,r=e)),s);e.$$.on_destroy.push(()=>o());let{$$slots:a={},$$scope:l}=t,{error:s=null}=t;i();let{onError:c=null}=t,d="production"!==("undefined"!=typeof process&&process.env&&process.env.NODE_ENV);return e.$$set=e=>{"error"in e&&i(n(0,s=e.error)),"onError"in e&&n(3,c=e.onError),"$$scope"in e&&n(4,l=e.$$scope)},e.$$.update=()=>{10&e.$$.dirty&&r&&c&&c(r)},[s,r,d,c,l,a]}styleInject(css_248z);class DefaultBoundary extends internal.SvelteComponent{constructor(e){super(),internal.init(this,e,instance$1,create_fragment$1,internal.safe_not_equal,{error:0,onError:3})}}function noop(){}function safe_not_equal(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}const subscriber_queue=[];function writable(e,t=noop){let n;const r=new Set;function o(t){if(safe_not_equal(e,t)&&(e=t,n)){const t=!subscriber_queue.length;for(const t of r)t[1](),subscriber_queue.push(t,e);if(t){for(let e=0;e<subscriber_queue.length;e+=2)subscriber_queue[e][0](subscriber_queue[e+1]);subscriber_queue.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(i,a=noop){const l=[i,a];return r.add(l),1===r.size&&(n=t(o)||noop),i(e),()=>{r.delete(l),0===r.size&&n&&(n(),n=null)}}}}const GUARDED_BLOCK_FNS=["c","l","h","m","p","a","i","o","d"];function createBoundary(e){if(e.$$render){let t=e.$$render;return e.$$render=(e,n,r,o)=>{const i=writable(void 0);try{return t(e,{error:i,...n},r,o)}catch(o){return i.set(o),t(e,{error:i,...n},r,{})}},e}function t(e,t){return function(...n){try{return e(...n)}catch(e){t(e)}}}return class extends e{constructor(e){const n=writable(void 0);e.props.$$slots.default=e.props.$$slots.default.map(e=>(...r)=>{let o=t(e,n.set)(...r);if(o)for(let e of GUARDED_BLOCK_FNS)o[e]&&(o[e]=t(o[e],n.set));return o}),super(e),this.$$set({error:n})}}}createBoundary(DefaultBoundary);var Boundary=createBoundary(Boundary$1);function create_default_slot_1(e){let t;const n=e[1].default,r=internal.create_slot(n,e,e[2],null);return{c(){r&&r.c()},m(e,n){r&&r.m(e,n),t=!0},p(e,o){r&&r.p&&(!t||4&o)&&internal.update_slot_base(r,n,e,e[2],t?internal.get_slot_changes(n,e[2],o,null):internal.get_all_dirty_from_scope(e[2]),null)},i(e){t||(internal.transition_in(r,e),t=!0)},o(e){internal.transition_out(r,e),t=!1},d(e){r&&r.d(e)}}}function create_default_slot(e){let t,n;const r=[e[0]];let o={$$slots:{default:[create_default_slot_1]},$$scope:{ctx:e}};for(let e=0;e<r.length;e+=1)o=internal.assign(o,r[e]);return t=new Component$1({props:o}),{c(){internal.create_component(t.$$.fragment)},m(e,r){internal.mount_component(t,e,r),n=!0},p(e,n){const o=1&n?internal.get_spread_update(r,[internal.get_spread_object(e[0])]):{};4&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(internal.transition_in(t.$$.fragment,e),n=!0)},o(e){internal.transition_out(t.$$.fragment,e),n=!1},d(e){internal.destroy_component(t,e)}}}function create_fragment(e){let t,n;return t=new Boundary({props:{$$slots:{default:[create_default_slot]},$$scope:{ctx:e}}}),{c(){internal.create_component(t.$$.fragment)},m(e,r){internal.mount_component(t,e,r),n=!0},p(e,[n]){const r={};5&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(internal.transition_in(t.$$.fragment,e),n=!0)},o(e){internal.transition_out(t.$$.fragment,e),n=!1},d(e){internal.destroy_component(t,e)}}}function instance(e,t,n){let{$$slots:r={},$$scope:o}=t;return e.$$set=e=>{n(0,t=internal.assign(internal.assign({},t),internal.exclude_internal_props(e))),"$$scope"in e&&n(2,o=e.$$scope)},[t=internal.exclude_internal_props(t),r,o]}class Wrapper extends internal.SvelteComponent{constructor(e){super(),internal.init(this,e,instance,create_fragment,internal.safe_not_equal,{})}}var type="component",metadata={},schema={name:"injecteur-code-personnalise",friendlyName:"Injecteur de code personnalis√©",description:"Permet d'injecter du code HTML, CSS et JavaScript personnalis√© dans votre application.\n\nCr√©√© par MEMORA Solutions - St√©phane Lapointe (stephane@memora.ca)\nhttps://memora.solutions\nVersion 2.2.0 - Affichage texte corrig√©",icon:"Code",settings:[{type:"text",label:"Code HTML",key:"htmlCode",defaultValue:""},{type:"text",label:"Code CSS",key:"cssCode",defaultValue:""},{type:"text",label:"Code JavaScript",key:"jsCode",defaultValue:""},{type:"select",label:"Mode d'ex√©cution",key:"executionMode",defaultValue:"onMount",options:[{label:"Au chargement (onMount)",value:"onMount"},{label:"Au clic (onClick)",value:"onClick"},{label:"En intervalle (onInterval)",value:"onInterval"}]},{type:"number",label:"Intervalle (ms)",key:"intervalTime",defaultValue:1e3,min:100,max:6e4,showIf:{executionMode:"onInterval"}},{type:"boolean",label:"Mode sandbox (s√©curis√©)",key:"sandboxMode",defaultValue:!1}],info:"Cr√©√© par MEMORA Solutions | St√©phane Lapointe | stephane@memora.ca | https://memora.solutions",requiredAncestors:[],legalDirections:["row","column"]},schema$1={type:type,metadata:metadata,schema:schema};if(window){const e={Component:Wrapper,schema:schema$1,version:pkg.version};window["##BUDIBASE_CUSTOM_COMPONENTS##"]||(window["##BUDIBASE_CUSTOM_COMPONENTS##"]=[]),window["##BUDIBASE_CUSTOM_COMPONENTS##"].push(e),window.registerCustomComponent&&window.registerCustomComponent(e)}const Component=Wrapper,version=pkg.version;return exports.Component=Component,exports.schema=schema$1,exports.version=version,Object.defineProperty(exports,"__esModule",{value:!0}),exports}({},svelte_internal,svelte);
